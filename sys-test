#!/bin/bash

# Function to extract the value using grep, sed, and awk
extract_value() {
    grep -o "\"$1\":\"[^\"]*\"" "$2" | sed 's/.*":"//' | sed 's/"$//' | awk 'NR==1{print; exit}'
}

# Replace 'your_security_log_file.txt' with the path to your actual security log file
log_file_path="your_security_log_file.txt"

# Extract the result and scan URL
result=$(extract_value "result" "$log_file_path")
scan_url=$(extract_value "scan-result-url" "$log_file_path")

# Save the extracted values to the output file
echo "Result: $result" > slack.output
echo "Scan URL: $scan_url" >> slack.output

echo "The result and scan URL have been saved to slack.output"
